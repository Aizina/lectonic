"use strict";exports.id=152,exports.ids=[152],exports.modules={6514:(e,t,a)=>{a.d(t,{A:()=>r});let r={src:"/_next/static/media/theme_bg.4741cf3e.png",height:285,width:656,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAADFBMVEUCQWIBGS8AJkEAM1HTUi3zAAAAAXRSTlP+GuMHfQAAAAlwSFlzAAALEwAACxMBAJqcGAAAABlJREFUeJxjYAYDBgYGJjBgZmJgBAEmRkYAAswALW03ApYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},742:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(8732),l=a(6514),s=a(7439);let i={src:"/_next/static/media/rating.ed2a3c2c.svg",height:18,width:18,blurWidth:0,blurHeight:0};var n=a(958),c=a(8240),o=a(9965),d=a.n(o),m=a(1106),x=a.n(m),p=a(2015);let u=({lectures:e,hasMore:t,loadMore:a,loading:o})=>{let[m,u]=(0,p.useState)(null);return(0,r.jsx)(n.W,{title:"Лекции",children:(0,r.jsxs)("div",{children:[e.map(e=>{let t=m===e.id;return(0,r.jsxs)("div",{className:"flex flex-col max-w-[1094px] gap-8 border-b border-[#B3B3B3] mb-10",children:[(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsx)("div",{className:"relative w-[163px] h-[156px]",children:(0,r.jsx)(d(),{src:e.image||l.A,alt:"Изображение лекции",fill:!0,className:"object-cover rounded-[26px] border"})}),(0,r.jsxs)("div",{className:"max-w-[745px] flex flex-col gap-3",children:["0"!==e.rating&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:"font-montserrat text-[20px] text-[#1E1E1E]",children:e.rating}),(0,r.jsx)(d(),{src:i,width:16,height:16,alt:"Рейтинг",style:{width:"auto",height:"auto"}})]}),(0,r.jsx)("span",{className:`font-roboto text-[24px] leading-[136%] uppercase ${e.title.length<50&&e.rating?"mb-[74px]":"mb-[40px]"}`,children:e.title}),(0,r.jsx)("div",{className:"flex gap-5",children:e.themes.map((e,t)=>(0,r.jsx)("div",{className:"py-1 px-5 bg-[#F7F7F7] text-primaryText rounded-[50px] text-[10px] 2xl:text-[16px] leading-7 font-medium",children:e},t))})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-montserrat text-[16px] leading-[136%] text-[#6B6B6B]",children:(0,c.Z)(e.description,200)})}),(0,r.jsxs)("div",{className:"flex pt-5 pb-10 justify-between",children:[1===e.lecturers.length&&(0,r.jsx)(x(),{href:`/lecturer/${e.lecturers[0].lecturer_id}`,children:(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between",children:[(0,r.jsx)("div",{className:"relative w-[38px] h-[38px] rounded-full overflow-hidden",children:(0,r.jsx)(d(),{src:e.lecturers[0].photo_main,alt:"Лектор",fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-montserrat font-medium text-[14px] text-[#202020] leading-[125%]",children:[e.lecturers[0].first_name," ",e.lecturers[0].middle_name," ",e.lecturers[0].last_name]}),(0,r.jsx)("div",{className:"max-w-[850px] font-montserrat text-[14px] text-[#454545] leading-[125%]",children:e.lecturers[0].specialization})]})]})}),2===e.lecturers.length&&(0,r.jsx)("div",{className:"flex gap-6",children:e.lecturers.map(e=>(0,r.jsx)(x(),{href:`/lecturer/${e.lecturer_id}`,children:(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between",children:[(0,r.jsx)("div",{className:"relative w-[38px] h-[38px] rounded-full overflow-hidden",children:(0,r.jsx)(d(),{src:e.photo_main,alt:"Лектор",fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-montserrat font-medium text-[14px] text-[#202020] leading-[125%]",children:[e.first_name," ",e.middle_name," ",e.last_name]}),(0,r.jsx)("div",{className:"max-w-[850px] font-montserrat text-[14px] text-[#454545] leading-[125%]",children:e.specialization})]})]})},e.lecturer_id))}),e.lecturers.length>2&&(0,r.jsxs)("div",{className:"flex items-center",onMouseEnter:()=>u(e.id),onMouseLeave:()=>u(null),children:[(0,r.jsx)("div",{className:"flex -space-x-4 relative",children:e.lecturers.slice(0,3).map((e,a)=>(0,r.jsx)(x(),{href:`/lecturer/${e.lecturer_id}`,className:"relative w-[38px] h-[38px] rounded-full overflow-hidden border-2 border-white        transition-transform duration-300",style:{zIndex:100-a,transform:t?`translateX(${(a+1)*8}px)`:"none"},children:(0,r.jsx)(d(),{src:e.photo_small,alt:"Лектор",fill:!0,className:"object-cover"})},e.lecturer_id))}),e.lecturers.length>3&&(0,r.jsxs)("span",{className:"ml-2 transition-transform duration-300",style:{transform:t?"translateX(32px)":"none"},children:["+",e.lecturers.length-3," лекторов на тему"]})]}),(0,r.jsx)(x(),{href:`/lecture/${e.id}`,children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex justify-between items-center py-2 px-8 rounded-[52px] bg-primary hover:bg-primary-hover hover:cursor-pointer",children:(0,r.jsx)("span",{className:"font-roboto text-white text-[20px]",children:"Подробнее"})})})})]})]},e.id)}),o&&e.length>0&&(0,r.jsx)("div",{className:"font-montserrat text-[14px] text-[#454545] leading-[130%] text-center my-4",children:"Загрузка..."}),t&&!o&&(0,r.jsxs)("div",{onClick:a,className:"flex justify-center my-8 hover:cursor-pointer items-center gap-5",children:[(0,r.jsx)("span",{className:"font-montserrat font-medium text-[14px] text-[#454545] leading-[130%]",children:"Показать больше"}),(0,r.jsx)(d(),{src:s.A,alt:"Вниз"})]})]})})}},9739:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{r:()=>n});var l=a(2015),s=a(1428),i=e([s]);s=(i.then?(await i)():i)[0];let c=e=>{let t=new URLSearchParams;for(let a in e){let r=e[a];Array.isArray(r)?r.forEach(e=>t.append(a,String(e))):null!=r&&t.append(a,String(r))}return t.toString()};function n({organizationId:e,searchValue:t,selectedThemes:a}){let[r,i]=(0,l.useState)([]),[n,o]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null),[x,p]=(0,l.useState)(!0),[u,h]=(0,l.useState)(1),f=(0,l.useCallback)(async r=>{1===r&&i([]),o(!0),m(null);let l="https://api.lectonic.skroy.ru",n=e?`${l}/organization/${e}/lectures`:`${l}/lectures`,d={"project-id":"7bad8c49-6e57-4347-9e14-ebc056c21136"},x={current_page:r,objects_per_page:5,add_lecturer_data:!0};a.length>0&&(x.themes=a);let u=[],h=!1;try{let a=t.trim();if(a){let e={...x,title:a},t={...x,description:a};console.log("Fetching with title:",e),console.log("Fetching with description:",t);let r=s.default.get(n,{params:e,headers:d,paramsSerializer:c}),l=s.default.get(n,{params:t,headers:d,paramsSerializer:c}),i=await Promise.allSettled([r,l]),o=[],p=null;i.forEach((e,t)=>{let a=0===t?"title":"description";if("fulfilled"===e.status){let t=e.value.data?.data;Array.isArray(t)?(console.log(`Workspaceed ${t.length} items for ${a}`),o.push(...t)):console.warn(`API call for ${a} search succeeded but returned non-array data:`,e.value.data)}else h=!0,p=`Не удалось загрузить результаты ${"title"===a?"по названию":"по описанию"}. ${e.reason instanceof Error?e.reason.message:String(e.reason)}`,console.error(`Error fetching lectures for ${a} search:`,e.reason)});let f=new Map;o.forEach(e=>{e?.id&&!f.has(e.id)&&f.set(e.id,e)}),u=Array.from(f.values()),console.log(`Combined and deduplicated to ${u.length} items`),h&&u.length>0?m(p):h&&m(p||"Ошибка загрузки результатов поиска")}else{console.log("Fetching without search term",x);let e=await s.default.get(n,{params:x,headers:d,paramsSerializer:c});u=Array.isArray(e.data?.data)?e.data.data:[]}let l=[];u.length>0&&(l=e?u.map(e=>({id:e.id,title:e.lecture_data.title,description:e.lecture_data.description,image:e.lecture_data.image?.long,rating:"0",themes:e.themes?.map(e=>e.title)||[],lecturers:e.lecturers?.map(e=>({lecturer_id:e.lecturer_id,specialization:e.lecturer.specialization,first_name:e.lecturer.first_name,last_name:e.lecturer.last_name,middle_name:e.lecturer.middle_name,photo_main:e.lecturer.photo_main,photo_small:e.lecturer.photo_small}))||[]})):u.map(e=>({id:e.id,title:e.lecture_data.title,description:e.lecture_data.description,image:e.lecture_data.image?.long,rating:e.lecture_data.rating??"0",themes:e.themes?.map(e=>e.title)||[],lecturers:e.lecturers?.map(e=>({lecturer_id:e.lecturer_id,specialization:e.lecturer.specialization,first_name:e.lecturer.first_name,last_name:e.lecturer.last_name,middle_name:e.lecturer.middle_name,photo_main:e.lecturer.photo_main,photo_small:e.lecturer.photo_small}))||[]}))),i(e=>1===r?l:[...e,...l.filter(t=>!e.some(e=>e.id===t.id))]);let o=x.objects_per_page;p(l.length===o)}catch(e){console.error("General error in fetchLectures:",e),h||m(e instanceof Error?e.message:"Ошибка загрузки лекций"),1===r&&i([]),p(!1)}finally{o(!1)}},[e,t,a]),g=(0,l.useCallback)(()=>{h(1),f(1)},[f]),j=(0,l.useCallback)(()=>{if(!n&&x){let e=u+1;console.log(`Loading more: page ${e}`),h(e),f(e)}else n?console.log("Load more skipped: currently loading"):x||console.log("Load more skipped: no more items")},[u,n,x,f]);return{lectures:r,loading:n,error:d,hasMore:x,loadMore:j,refetch:g}}r()}catch(e){r(e)}})},2152:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>m});var l=a(8732),s=a(742),i=a(9739),n=a(2015),c=a(2498),o=a(2285),d=e([i,o]);[i,o]=d.then?(await d)():d;let m=({id:e})=>{let[t,a]=(0,n.useState)(""),[r,d]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[p,u]=(0,n.useState)(""),h=function(e,t){let[a,r]=(0,n.useState)(e);return a}(t,0),{lectures:f,loading:g,error:j,hasMore:A,loadMore:v,refetch:_}=(0,i.r)({organizationId:e,searchValue:h,selectedThemes:r}),b=(0,n.useCallback)(()=>{_()},[_]),N=(0,n.useCallback)(()=>{d([]),_()},[_]);return((0,n.useEffect)(()=>{if(g){u("Загрузка данных...");return}f.length>0||A?u(""):setTimeout(()=>{u(h||r.length>0?"Лекции, соответствующие вашим фильтрам, не найдены.":"Данных о лекциях пока нет.")},300)},[g,f,h,r,A]),j)?(0,l.jsxs)("div",{className:"container h-[700px] flex justify-center items-center mx-auto my-12 p-4 font-roboto uppercase font-bold text-[48px] text-center",children:["Произошла ошибка: ",j]}):(0,l.jsx)("div",{className:"container mx-auto my-8 px-4 relative",children:(0,l.jsxs)("div",{className:"container mx-auto flex py-24 justify-between gap-10",children:[(0,l.jsx)("div",{className:"text-left basis-3/10",children:(0,l.jsxs)("div",{className:"max-w-[356px] flex flex-col gap-5",children:[(0,l.jsx)("span",{className:"font-roboto font-medium text-[48px] leading-[125%]",children:"Каталог лекций"}),(0,l.jsx)("span",{className:"font-montserrat font-normal text-[20px] text-[#6B6B6B] leading-[136%]",children:"Выберите интересующую вас тему из широкого ассортимента лекций от ведущих экспертов."})]})}),(0,l.jsxs)("div",{className:"flex flex-col gap-10 basis-7/10 w-[100%]",children:[(0,l.jsx)(c.A,{searchValue:t,setSearchValue:a,onOpenThemesModal:()=>x(!0),isLectorsPage:!1}),(0,l.jsx)(o.A,{isOpen:m,onClose:()=>x(!1),selectedThemes:r,setSelectedThemes:d,onApplyFilters:b,onResetFilters:N}),(0,l.jsx)("div",{className:"min-h-[700px] flex justify-center items-center ",children:g?(0,l.jsx)("span",{className:"text-[48px] font-roboto uppercase font-bold",children:"Загрузка данных..."}):0===f.length?(0,l.jsx)("span",{className:"text-xl text-gray-500",children:p}):(0,l.jsx)(s.A,{lectures:f,hasMore:A,loadMore:v,loading:g})})]})]})})};r()}catch(e){r(e)}})}};