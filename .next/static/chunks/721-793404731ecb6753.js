"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{6514:(e,t,l)=>{l.d(t,{A:()=>a});let a={src:"/_next/static/media/theme_bg.4741cf3e.png",height:285,width:656,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAADFBMVEUCQWIBGS8AJkEAM1HTUi3zAAAAAXRSTlP+GuMHfQAAAAlwSFlzAAALEwAACxMBAJqcGAAAABlJREFUeJxjYAYDBgYGJjBgZmJgBAEmRkYAAswALW03ApYAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},7439:(e,t,l)=>{l.d(t,{A:()=>a});let a={src:"/_next/static/media/down.40cb9323.svg",height:24,width:24,blurWidth:0,blurHeight:0}},2498:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(4848);l(6540);var s=l(9965),r=l.n(s);let i={src:"/_next/static/media/slider.abbcdf01.svg",height:52,width:70,blurWidth:0,blurHeight:0},n={src:"/_next/static/media/search.5d06c475.svg",height:24,width:24,blurWidth:0,blurHeight:0},c=e=>{let{searchValue:t,setSearchValue:l,onOpenThemesModal:s,isLectorsPage:c}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(r(),{src:i,alt:"Themes Icon",width:70,height:52,onClick:s,className:""}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-4 flex items-center",children:(0,a.jsx)(r(),{src:n,alt:"Search Icon",width:24,height:24})}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>l(e.target.value),placeholder:c?"Найти лектора":"Найти лекцию",disabled:c,className:"   border   rounded-3xl   px-12  /* Adjusted for icon space */   py-2   w-full   h-[50px]   pl-12 /* Extra padding for the icon */   "})]})]})}},2285:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(4848),s=l(6540),r=l(4335),i=l(9490);let n=e=>{let{isOpen:t,onClose:l,selectedThemes:n,setSelectedThemes:c,onApplyFilters:d,onResetFilters:o}=e,[m,u]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[p,f]=(0,s.useState)(n),[g,v]=(0,s.useState)([]),[j,b]=(0,s.useState)("");(0,s.useEffect)(()=>{t&&(A(),f(n))},[t]),(0,s.useEffect)(()=>{t&&f(n)},[n,t]),(0,s.useEffect)(()=>{v(m.filter(e=>e.theme_data.title.toLowerCase().includes(j.toLowerCase())||e.subthemes.some(e=>e.theme_data.title.toLowerCase().includes(j.toLowerCase()))))},[j,m]);let A=async()=>{try{var e,t,l;let a=await r.A.get("".concat("https://api.lectonic.skroy.ru","/themes"),{headers:{"project-id":"7bad8c49-6e57-4347-9e14-ebc056c21136"}});if(null===(l=a.data)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.themes){let e=a.data.data[0].themes;u(e),console.log(e)}else console.warn("Themes data not found in the expected structure:",a.data),u([])}catch(e){console.error("Error fetching themes:",e),u([])}},N=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},_=(0,s.useCallback)((e,t)=>{f(l=>{let a=l.includes(e),s=[...l];return a?s=s.filter(l=>l!==e&&!t.includes(l)):s.push(e,...t),Array.from(new Set(s))})},[]),w=(0,s.useCallback)(e=>{f(t=>{let l=t.includes(e),a=[...t];return l?a=a.filter(t=>t!==e):a.push(e),Array.from(new Set(a))})},[]),y=(0,s.useCallback)(()=>{f([]),o(),l()},[o]),k=(0,s.useCallback)(()=>{c(p),d(),l()},[p,c,d,l]);return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-start z-50 p-4",children:(0,a.jsxs)("div",{className:"absolute left-5 bg-white rounded-3xl p-6 w-full max-w-[400px] flex flex-col shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:"Выберите тему"})," ",(0,a.jsx)("input",{type:"text",className:"w-full p-2 mb-4 border rounded-md",placeholder:"Поиск темы...",value:j,onChange:e=>b(e.target.value)}),(0,a.jsxs)("div",{className:"overflow-y-auto flex-grow mb-4",children:[0===g.length&&(0,a.jsx)("p",{children:"Загрузка тем..."}),g.map(e=>{let t=e.subthemes.map(e=>e.id),l=p.includes(e.id),s=t.length>0&&t.every(e=>p.includes(e)),r=t.some(e=>p.includes(e)),n="unchecked";return l||s?n="checked":r&&(n="indeterminate"),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between font-medium",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:"checked"===n,ref:e=>{e&&(e.indeterminate="indeterminate"===n)},onChange:()=>_(e.id,t)}),(0,a.jsx)("span",{children:e.theme_data.title})]}),e.subthemes.length>0&&(0,a.jsx)("button",{onClick:()=>N(e.id),className:"p-1 text-gray-600 hover:text-gray-800",children:h.includes(e.id)?(0,a.jsx)(i.wAb,{size:18}):(0,a.jsx)(i.fK4,{size:18})})]}),h.includes(e.id)&&e.subthemes.length>0&&(0,a.jsx)("div",{className:"pl-6 mt-2 border-l-2 border-gray-200 ml-2",children:e.subthemes.map(e=>{let t=p.includes(e.id);return(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:()=>w(e.id)}),(0,a.jsx)("span",{children:e.theme_data.title})]})},e.id)})})]},e.id)})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-auto flex-shrink-0 pt-4 border-t",children:[(0,a.jsx)("button",{className:"px-4 py-2 border rounded-md text-sm hover:bg-gray-100",onClick:y,children:"Сбросить все фильтры"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",onClick:k,children:"Применить"})]})]})}):null}},958:(e,t,l)=>{l.d(t,{W:()=>n});var a=l(4848),s=l(3368),r=l.n(s);let i=e=>{let{title:t="Error"}=e;return(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"".concat(t," | Лектоник")}),(0,a.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]})},n=e=>{let{title:t,children:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{title:t}),l]})}},8240:(e,t,l)=>{l.d(t,{Z:()=>a});function a(e,t){if(e.length<=t)return e;let l=e.slice(0,t),a=l.lastIndexOf(" ");return a>0&&(l=l.slice(0,a)),l+"..."}},5721:(e,t,l)=>{l.r(t),l.d(t,{default:()=>j});var a=l(4848),s=l(6514),r=l(7439);let i={src:"/_next/static/media/rating.ed2a3c2c.svg",height:18,width:18,blurWidth:0,blurHeight:0};var n=l(958),c=l(8240),d=l(9965),o=l.n(d),m=l(1106),u=l.n(m),h=l(6540);let x=e=>{let{lectures:t,hasMore:l,loadMore:d,loading:m}=e,[x,p]=(0,h.useState)(null);return(0,a.jsx)(n.W,{title:"Лекции",children:(0,a.jsxs)("div",{children:[t.map(e=>{let t=x===e.id;return(0,a.jsxs)("div",{className:"flex flex-col max-w-[1094px] gap-8 border-b border-[#B3B3B3] mb-10",children:[(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"relative w-[163px] h-[156px]",children:(0,a.jsx)(o(),{src:e.image||s.A,alt:"Изображение лекции",fill:!0,className:"object-cover rounded-[26px] border"})}),(0,a.jsxs)("div",{className:"max-w-[745px] flex flex-col gap-3",children:["0"!==e.rating&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"font-montserrat text-[20px] text-[#1E1E1E]",children:e.rating}),(0,a.jsx)(o(),{src:i,width:16,height:16,alt:"Рейтинг",style:{width:"auto",height:"auto"}})]}),(0,a.jsx)("span",{className:"font-roboto text-[24px] leading-[136%] uppercase ".concat(e.title.length<50&&e.rating?"mb-[74px]":"mb-[40px]"),children:e.title}),(0,a.jsx)("div",{className:"flex gap-5",children:e.themes.map((e,t)=>(0,a.jsx)("div",{className:"py-1 px-5 bg-[#F7F7F7] text-primaryText rounded-[50px] text-[10px] 2xl:text-[16px] leading-7 font-medium",children:e},t))})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"font-montserrat text-[16px] leading-[136%] text-[#6B6B6B]",children:(0,c.Z)(e.description,200)})}),(0,a.jsxs)("div",{className:"flex pt-5 pb-10 justify-between",children:[1===e.lecturers.length&&(0,a.jsx)(u(),{href:"/lecturer/".concat(e.lecturers[0].lecturer_id),children:(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-between",children:[(0,a.jsx)("div",{className:"relative w-[38px] h-[38px] rounded-full overflow-hidden",children:(0,a.jsx)(o(),{src:e.lecturers[0].photo_main,alt:"Лектор",fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-montserrat font-medium text-[14px] text-[#202020] leading-[125%]",children:[e.lecturers[0].first_name," ",e.lecturers[0].middle_name," ",e.lecturers[0].last_name]}),(0,a.jsx)("div",{className:"max-w-[850px] font-montserrat text-[14px] text-[#454545] leading-[125%]",children:e.lecturers[0].specialization})]})]})}),2===e.lecturers.length&&(0,a.jsx)("div",{className:"flex gap-6",children:e.lecturers.map(e=>(0,a.jsx)(u(),{href:"/lecturer/".concat(e.lecturer_id),children:(0,a.jsxs)("div",{className:"flex gap-3 items-center justify-between",children:[(0,a.jsx)("div",{className:"relative w-[38px] h-[38px] rounded-full overflow-hidden",children:(0,a.jsx)(o(),{src:e.photo_main,alt:"Лектор",fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-montserrat font-medium text-[14px] text-[#202020] leading-[125%]",children:[e.first_name," ",e.middle_name," ",e.last_name]}),(0,a.jsx)("div",{className:"max-w-[850px] font-montserrat text-[14px] text-[#454545] leading-[125%]",children:e.specialization})]})]})},e.lecturer_id))}),e.lecturers.length>2&&(0,a.jsxs)("div",{className:"flex items-center",onMouseEnter:()=>p(e.id),onMouseLeave:()=>p(null),children:[(0,a.jsx)("div",{className:"flex -space-x-4 relative",children:e.lecturers.slice(0,3).map((e,l)=>(0,a.jsx)(u(),{href:"/lecturer/".concat(e.lecturer_id),className:"relative w-[38px] h-[38px] rounded-full overflow-hidden border-2 border-white        transition-transform duration-300",style:{zIndex:100-l,transform:t?"translateX(".concat((l+1)*8,"px)"):"none"},children:(0,a.jsx)(o(),{src:e.photo_small,alt:"Лектор",fill:!0,className:"object-cover"})},e.lecturer_id))}),e.lecturers.length>3&&(0,a.jsxs)("span",{className:"ml-2 transition-transform duration-300",style:{transform:t?"translateX(".concat(32,"px)"):"none"},children:["+",e.lecturers.length-3," лекторов на тему"]})]}),(0,a.jsx)(u(),{href:"/lecture/".concat(e.id),children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex justify-between items-center py-2 px-8 rounded-[52px] bg-primary hover:bg-primary-hover hover:cursor-pointer",children:(0,a.jsx)("span",{className:"font-roboto text-white text-[20px]",children:"Подробнее"})})})})]})]},e.id)}),m&&t.length>0&&(0,a.jsx)("div",{className:"font-montserrat text-[14px] text-[#454545] leading-[130%] text-center my-4",children:"Загрузка..."}),l&&!m&&(0,a.jsxs)("div",{onClick:d,className:"flex justify-center my-8 hover:cursor-pointer items-center gap-5",children:[(0,a.jsx)("span",{className:"font-montserrat font-medium text-[14px] text-[#454545] leading-[130%]",children:"Показать больше"}),(0,a.jsx)(o(),{src:r.A,alt:"Вниз"})]})]})})};var p=l(4335);let f=e=>{let t=new URLSearchParams;for(let l in e){let a=e[l];Array.isArray(a)?a.forEach(e=>t.append(l,String(e))):null!=a&&t.append(l,String(a))}return t.toString()};var g=l(2498),v=l(2285);let j=e=>{let{id:t}=e,[l,s]=(0,h.useState)(""),[r,i]=(0,h.useState)([]),[n,c]=(0,h.useState)(!1),[d,o]=(0,h.useState)(""),m=function(e,t){let[l,a]=(0,h.useState)(e);return(0,h.useEffect)(()=>{let t=setTimeout(()=>{a(e)},800);return()=>{clearTimeout(t)}},[e,800]),l}(l,0),{lectures:u,loading:j,error:b,hasMore:A,loadMore:N,refetch:_}=function(e){let{organizationId:t,searchValue:l,selectedThemes:a}=e,[s,r]=(0,h.useState)([]),[i,n]=(0,h.useState)(!1),[c,d]=(0,h.useState)(null),[o,m]=(0,h.useState)(!0),[u,x]=(0,h.useState)(1),g=(0,h.useCallback)(async e=>{1===e&&r([]),n(!0),d(null);let s="https://api.lectonic.skroy.ru",i=t?"".concat(s,"/organization/").concat(t,"/lectures"):"".concat(s,"/lectures"),c={"project-id":"7bad8c49-6e57-4347-9e14-ebc056c21136"},o={current_page:e,objects_per_page:5,add_lecturer_data:!0};a.length>0&&(o.themes=a);let u=[],h=!1;try{let a=l.trim();if(a){let e={...o,title:a},t={...o,description:a};console.log("Fetching with title:",e),console.log("Fetching with description:",t);let l=p.A.get(i,{params:e,headers:c,paramsSerializer:f}),s=p.A.get(i,{params:t,headers:c,paramsSerializer:f}),r=await Promise.allSettled([l,s]),n=[],m=null;r.forEach((e,t)=>{let l=0===t?"title":"description";if("fulfilled"===e.status){var a;let t=null===(a=e.value.data)||void 0===a?void 0:a.data;Array.isArray(t)?(console.log("Workspaceed ".concat(t.length," items for ").concat(l)),n.push(...t)):console.warn("API call for ".concat(l," search succeeded but returned non-array data:"),e.value.data)}else h=!0,m="Не удалось загрузить результаты ".concat("title"===l?"по названию":"по описанию",". ").concat(e.reason instanceof Error?e.reason.message:String(e.reason)),console.error("Error fetching lectures for ".concat(l," search:"),e.reason)});let x=new Map;n.forEach(e=>{(null==e?void 0:e.id)&&!x.has(e.id)&&x.set(e.id,e)}),u=Array.from(x.values()),console.log("Combined and deduplicated to ".concat(u.length," items")),h&&u.length>0?d(m):h&&d(m||"Ошибка загрузки результатов поиска")}else{var x;console.log("Fetching without search term",o);let e=await p.A.get(i,{params:o,headers:c,paramsSerializer:f});u=Array.isArray(null===(x=e.data)||void 0===x?void 0:x.data)?e.data.data:[]}let s=[];u.length>0&&(s=t?u.map(e=>{var t,l,a;return{id:e.id,title:e.lecture_data.title,description:e.lecture_data.description,image:null===(t=e.lecture_data.image)||void 0===t?void 0:t.long,rating:"0",themes:(null===(l=e.themes)||void 0===l?void 0:l.map(e=>e.title))||[],lecturers:(null===(a=e.lecturers)||void 0===a?void 0:a.map(e=>({lecturer_id:e.lecturer_id,specialization:e.lecturer.specialization,first_name:e.lecturer.first_name,last_name:e.lecturer.last_name,middle_name:e.lecturer.middle_name,photo_main:e.lecturer.photo_main,photo_small:e.lecturer.photo_small})))||[]}}):u.map(e=>{var t,l,a,s;return{id:e.id,title:e.lecture_data.title,description:e.lecture_data.description,image:null===(t=e.lecture_data.image)||void 0===t?void 0:t.long,rating:null!==(s=e.lecture_data.rating)&&void 0!==s?s:"0",themes:(null===(l=e.themes)||void 0===l?void 0:l.map(e=>e.title))||[],lecturers:(null===(a=e.lecturers)||void 0===a?void 0:a.map(e=>({lecturer_id:e.lecturer_id,specialization:e.lecturer.specialization,first_name:e.lecturer.first_name,last_name:e.lecturer.last_name,middle_name:e.lecturer.middle_name,photo_main:e.lecturer.photo_main,photo_small:e.lecturer.photo_small})))||[]}})),r(t=>1===e?s:[...t,...s.filter(e=>!t.some(t=>t.id===e.id))]);let n=o.objects_per_page;m(s.length===n)}catch(t){console.error("General error in fetchLectures:",t),h||d(t instanceof Error?t.message:"Ошибка загрузки лекций"),1===e&&r([]),m(!1)}finally{n(!1)}},[t,l,a]);(0,h.useEffect)(()=>{console.log('Effect triggered: Fetching page 1 for search: "'.concat(l,'", themes: [').concat(a.join(", "),"]")),x(1),g(1)},[l,a,t]);let v=(0,h.useCallback)(()=>{x(1),g(1)},[g]),j=(0,h.useCallback)(()=>{if(!i&&o){let e=u+1;console.log("Loading more: page ".concat(e)),x(e),g(e)}else i?console.log("Load more skipped: currently loading"):o||console.log("Load more skipped: no more items")},[u,i,o,g]);return{lectures:s,loading:i,error:c,hasMore:o,loadMore:j,refetch:v}}({organizationId:t,searchValue:m,selectedThemes:r}),w=(0,h.useCallback)(()=>{_()},[_]),y=(0,h.useCallback)(()=>{i([]),_()},[_]);return((0,h.useEffect)(()=>{if(j){o("Загрузка данных...");return}u.length>0||A?o(""):setTimeout(()=>{o(m||r.length>0?"Лекции, соответствующие вашим фильтрам, не найдены.":"Данных о лекциях пока нет.")},300)},[j,u,m,r,A]),b)?(0,a.jsxs)("div",{className:"container h-[700px] flex justify-center items-center mx-auto my-12 p-4 font-roboto uppercase font-bold text-[48px] text-center",children:["Произошла ошибка: ",b]}):(0,a.jsx)("div",{className:"container mx-auto my-8 px-4 relative",children:(0,a.jsxs)("div",{className:"container mx-auto flex py-24 justify-between gap-10",children:[(0,a.jsx)("div",{className:"text-left basis-3/10",children:(0,a.jsxs)("div",{className:"max-w-[356px] flex flex-col gap-5",children:[(0,a.jsx)("span",{className:"font-roboto font-medium text-[48px] leading-[125%]",children:"Каталог лекций"}),(0,a.jsx)("span",{className:"font-montserrat font-normal text-[20px] text-[#6B6B6B] leading-[136%]",children:"Выберите интересующую вас тему из широкого ассортимента лекций от ведущих экспертов."})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-10 basis-7/10 w-[100%]",children:[(0,a.jsx)(g.A,{searchValue:l,setSearchValue:s,onOpenThemesModal:()=>c(!0),isLectorsPage:!1}),(0,a.jsx)(v.A,{isOpen:n,onClose:()=>c(!1),selectedThemes:r,setSelectedThemes:i,onApplyFilters:w,onResetFilters:y}),(0,a.jsx)("div",{className:"min-h-[700px] flex justify-center items-center ",children:j?(0,a.jsx)("span",{className:"text-[48px] font-roboto uppercase font-bold",children:"Загрузка данных..."}):0===u.length?(0,a.jsx)("span",{className:"text-xl text-gray-500",children:d}):(0,a.jsx)(x,{lectures:u,hasMore:A,loadMore:N,loading:j})})]})]})})}}}]);