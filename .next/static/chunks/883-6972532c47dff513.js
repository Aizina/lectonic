"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{7439:(e,t,s)=>{s.d(t,{A:()=>a});let a={src:"/_next/static/media/down.40cb9323.svg",height:24,width:24,blurWidth:0,blurHeight:0}},2498:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(4848);s(6540);var l=s(9965),r=s.n(l);let n={src:"/_next/static/media/slider.abbcdf01.svg",height:52,width:70,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/search.5d06c475.svg",height:24,width:24,blurWidth:0,blurHeight:0},c=e=>{let{searchValue:t,setSearchValue:s,onOpenThemesModal:l,isLectorsPage:c}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(r(),{src:n,alt:"Themes Icon",width:70,height:52,onClick:l,className:""}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-4 flex items-center",children:(0,a.jsx)(r(),{src:i,alt:"Search Icon",width:24,height:24})}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:c?"Найти лектора":"Найти лекцию",disabled:c,className:"   border   rounded-3xl   px-12  /* Adjusted for icon space */   py-2   w-full   h-[50px]   pl-12 /* Extra padding for the icon */   "})]})]})}},2285:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(4848),l=s(6540),r=s(4335),n=s(9490);let i=e=>{let{isOpen:t,onClose:s,selectedThemes:i,setSelectedThemes:c,onApplyFilters:o,onResetFilters:d}=e,[x,h]=(0,l.useState)([]),[m,u]=(0,l.useState)([]),[p,f]=(0,l.useState)(i),[g,b]=(0,l.useState)([]),[j,v]=(0,l.useState)("");(0,l.useEffect)(()=>{t&&(y(),f(i))},[t]),(0,l.useEffect)(()=>{t&&f(i)},[i,t]),(0,l.useEffect)(()=>{b(x.filter(e=>e.theme_data.title.toLowerCase().includes(j.toLowerCase())||e.subthemes.some(e=>e.theme_data.title.toLowerCase().includes(j.toLowerCase()))))},[j,x]);let y=async()=>{try{var e,t,s;let a=await r.A.get("".concat("https://api.lectonic.skroy.ru","/themes"),{headers:{"project-id":"7bad8c49-6e57-4347-9e14-ebc056c21136"}});if(null===(s=a.data)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.themes){let e=a.data.data[0].themes;h(e),console.log(e)}else console.warn("Themes data not found in the expected structure:",a.data),h([])}catch(e){console.error("Error fetching themes:",e),h([])}},N=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},w=(0,l.useCallback)((e,t)=>{f(s=>{let a=s.includes(e),l=[...s];return a?l=l.filter(s=>s!==e&&!t.includes(s)):l.push(e,...t),Array.from(new Set(l))})},[]),k=(0,l.useCallback)(e=>{f(t=>{let s=t.includes(e),a=[...t];return s?a=a.filter(t=>t!==e):a.push(e),Array.from(new Set(a))})},[]),C=(0,l.useCallback)(()=>{f([]),d(),s()},[d]),S=(0,l.useCallback)(()=>{c(p),o(),s()},[p,c,o,s]);return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-start z-50 p-4",children:(0,a.jsxs)("div",{className:"absolute left-5 bg-white rounded-3xl p-6 w-full max-w-[400px] flex flex-col shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:"Выберите тему"})," ",(0,a.jsx)("input",{type:"text",className:"w-full p-2 mb-4 border rounded-md",placeholder:"Поиск темы...",value:j,onChange:e=>v(e.target.value)}),(0,a.jsxs)("div",{className:"overflow-y-auto flex-grow mb-4",children:[0===g.length&&(0,a.jsx)("p",{children:"Загрузка тем..."}),g.map(e=>{let t=e.subthemes.map(e=>e.id),s=p.includes(e.id),l=t.length>0&&t.every(e=>p.includes(e)),r=t.some(e=>p.includes(e)),i="unchecked";return s||l?i="checked":r&&(i="indeterminate"),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between font-medium",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:"checked"===i,ref:e=>{e&&(e.indeterminate="indeterminate"===i)},onChange:()=>w(e.id,t)}),(0,a.jsx)("span",{children:e.theme_data.title})]}),e.subthemes.length>0&&(0,a.jsx)("button",{onClick:()=>N(e.id),className:"p-1 text-gray-600 hover:text-gray-800",children:m.includes(e.id)?(0,a.jsx)(n.wAb,{size:18}):(0,a.jsx)(n.fK4,{size:18})})]}),m.includes(e.id)&&e.subthemes.length>0&&(0,a.jsx)("div",{className:"pl-6 mt-2 border-l-2 border-gray-200 ml-2",children:e.subthemes.map(e=>{let t=p.includes(e.id);return(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:()=>k(e.id)}),(0,a.jsx)("span",{children:e.theme_data.title})]})},e.id)})})]},e.id)})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mt-auto flex-shrink-0 pt-4 border-t",children:[(0,a.jsx)("button",{className:"px-4 py-2 border rounded-md text-sm hover:bg-gray-100",onClick:C,children:"Сбросить все фильтры"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",onClick:S,children:"Применить"})]})]})}):null}},958:(e,t,s)=>{s.d(t,{W:()=>i});var a=s(4848),l=s(3368),r=s.n(l);let n=e=>{let{title:t="Error"}=e;return(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"".concat(t," | Лектоник")}),(0,a.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]})},i=e=>{let{title:t,children:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n,{title:t}),s]})}},8240:(e,t,s)=>{s.d(t,{Z:()=>a});function a(e,t){if(e.length<=t)return e;let s=e.slice(0,t),a=s.lastIndexOf(" ");return a>0&&(s=s.slice(0,a)),s+"..."}},4883:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(4848),l=s(7439),r=s(958),n=s(8240),i=s(9965),c=s.n(i),o=s(1106),d=s.n(o);let x=e=>{let{lecturers:t,hasMore:s,loadMore:i,loading:o}=e;return(0,a.jsx)(r.W,{title:"Лекторы",children:(0,a.jsxs)("div",{children:[t.map(e=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[1094px] gap-8 border-b border-[#B3B3B3] mb-10",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-6 justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"relative w-[163px] h-[156px]",children:(0,a.jsx)(c(),{src:e.image,alt:"Изображение лекции",sizes:"(max-width: 288px) 100vw, (max-width: 1200px) 50vw, 33vw",fill:!0,className:"object-cover rounded-[26px] border"})}),(0,a.jsxs)("div",{className:"max-w-[745px] flex flex-col gap-3",children:[(0,a.jsx)("span",{className:"font-roboto text-[24px] leading-[136%] uppercase ".concat(e.name.length<50?"mb-[74px]":""),children:e.name}),e.themes.length>=1&&(0,a.jsx)("div",{className:"flex gap-5",children:e.themes.map((e,t)=>{var s;return(0,a.jsx)("div",{className:"py-1 px-5 bg-[#F7F7F7] text-primaryText rounded-[50px] text-[10px] 2xl:text-[16px] leading-7 font-medium",children:e.title},null!==(s=e.id)&&void 0!==s?s:t)})})]})]}),e.emergencySpeaking&&(0,a.jsx)("div",{className:"items-end bg-[#FFBA1A] rounded-[20px] py-[8px] px-[12px] font-montserrat text-[#363636] text-[14px]",children:"Спикер на завтра"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"font-montserrat text-[16px] leading-[136%] text-[#6B6B6B]",children:(0,n.Z)(e.about,200)})}),(0,a.jsxs)("div",{className:"flex pt-5 pb-10 justify-between",children:[(0,a.jsx)("div",{className:"flex font-montserrat text-[16px] items-center",children:e.formats.length>1||"any"===e.formats[0]?(0,a.jsx)("p",{children:"Проводит лекции online и offline"}):(0,a.jsxs)("p",{children:["Проводит лекции ",e.formats[0]]})}),(0,a.jsx)(d(),{href:"/lecturer/".concat(e.id),children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex justify-between items-center py-2 px-8 rounded-[52px] bg-primary hover:bg-primary-hover hover:cursor-pointer",children:(0,a.jsx)("span",{className:"font-roboto text-white text-[20px]",children:"Подробнее"})})})})]})]},e.id)),o&&t.length>0&&(0,a.jsx)("div",{className:"font-montserrat text-[14px] text-[#454545] leading-[130%] text-center my-4",children:"Загрузка..."}),s&&!o&&(0,a.jsxs)("div",{onClick:i,className:"flex justify-center my-8 hover:cursor-pointer items-center gap-5",children:[(0,a.jsx)("span",{className:"font-montserrat font-medium text-[14px] text-[#454545] leading-[130%]",children:"Показать больше"}),(0,a.jsx)(c(),{src:l.A,alt:"Вниз"})]})]})})};var h=s(4335),m=s(6540);let u=e=>{let t=new URLSearchParams;for(let s in e){let a=e[s];Array.isArray(a)?a.forEach(e=>t.append(s,String(e))):null!=a&&""!==a&&t.append(s,String(a))}return t.toString()};var p=s(2498),f=s(2285);let g=e=>{let{organizationId:t}=e,[s,l]=(0,m.useState)(""),[r,n]=(0,m.useState)([]),[i,c]=(0,m.useState)(!1),[o,d]=(0,m.useState)(""),{lecturers:g,loading:b,error:j,hasMore:v,loadMore:y,refetch:N}=function(e){let{organizationId:t,selectedThemes:s,searchValue:a}=e,[l,r]=(0,m.useState)([]),[n,i]=(0,m.useState)(4),[c,o]=(0,m.useState)(!0),[d,x]=(0,m.useState)(null),[p,f]=(0,m.useState)(!0),g=(0,m.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("WorkspaceLecturers called: numToFetch=".concat(e,", isRefetch=").concat(a,", themes=[").concat(s.join(","),"]")),o(!0),x(null),a&&r([]);let l=t?"/organization/".concat(t,"/lecturers"):"/lecturers",n="".concat("https://api.lectonic.skroy.ru").concat(l),i={current_page:1,objects_per_page:e};s.length>0&&(i.themes=s),console.log("Fetching lecturers with params:",i);try{let t=await h.A.get(n,{headers:{"project-id":"7bad8c49-6e57-4347-9e14-ebc056c21136"},params:i,paramsSerializer:u});if(!t.data||!Array.isArray(t.data.data)){console.warn("Invalid response structure or missing data array:",t.data),a&&r([]),f(!1),x("Неверный формат ответа от сервера.");return}let s=t.data.data||[],l=s.map(e=>({id:e.lecturer_id,name:[e.profile.first_name,e.profile.middle_name,e.profile.last_name].filter(Boolean).join(" ").replace(/\s+/g," ").trim(),about:e.lecturer.about,image:e.profile.photo_main,specialization:e.lecturer.specialization,themes:Array.isArray(e.themes)?e.themes.map(e=>{var t,s;return{id:null!==(t=e.id)&&void 0!==t?t:"fallback-id-".concat(Math.random()),title:null!==(s=e.title)&&void 0!==s?s:"Без названия"}}):[],formats:Array.isArray(e.lecturer.format)?e.lecturer.format:[],emergencySpeaking:e.lecturer.emergency_speaking}));console.log("Workspaceed ".concat(s.length," items, transformed ").concat(l.length)),r(l);let c=s.length;f(c===e),console.log("HasMore set to: ".concat(c===e," (fetched: ").concat(c,", requested: ").concat(e,")"))}catch(t){console.error("Error fetching lecturers:",t);let e="Неизвестная ошибка загрузки лекторов";if(h.A.isAxiosError(t)){var c,d,m,p;e=(null===(d=t.response)||void 0===d?void 0:null===(c=d.data)||void 0===c?void 0:c.message)||t.message||e,(null===(m=t.response)||void 0===m?void 0:m.status)===404?e=s.length>0?"Лекторы с выбранными темами не найдены.":"Лекторы не найдены.":(null===(p=t.response)||void 0===p?void 0:p.status)===500&&(e="Ошибка на сервере при загрузке лекторов.")}else t instanceof Error&&(e=t.message);x(e),r([]),f(!1)}finally{o(!1)}},[t,s]);(0,m.useEffect)(()=>{console.log("Filters changed (Themes: [".concat(s.join(","),"], OrgID: ").concat(t,", Search: '").concat(a,"'). Resetting and fetching.")),i(4),g(4,!0)},[s,t,g]);let b=(0,m.useCallback)(()=>{if(!c&&p){let e=n+4;console.log("Load more requested. Fetching up to ".concat(e," items.")),i(e),g(e,!1)}else console.log("Load more skipped: loading=".concat(c,", hasMore=").concat(p))},[c,p,n,g]);return{lecturers:l,loading:c,error:d,hasMore:p,loadMore:b,refetch:(0,m.useCallback)(()=>{console.log("Explicit refetch requested."),i(4),g(4,!0)},[g])}}({organizationId:t,selectedThemes:r,searchValue:s}),w=(0,m.useCallback)(()=>{c(!0)},[]),k=(0,m.useCallback)(()=>{c(!1)},[]),C=(0,m.useCallback)(()=>{N(),k()},[k]),S=(0,m.useCallback)(()=>{n([]),N(),k()},[]);return((0,m.useEffect)(()=>{if(b){d("Загрузка данных...");return}g.length>0||v?d(""):setTimeout(()=>{d(r.length>0?"Лекции, соответствующие вашим фильтрам, не найдены.":"Данных о лекциях пока нет.")},300)},[b,g,r,v]),j)?(0,a.jsxs)("div",{className:"container h-[700px] flex justify-center items-center mx-auto my-12 p-4 font-roboto uppercase font-bold text-[48px] text-center",children:["Произошла ошибка: ",j]}):(0,a.jsx)("div",{className:"container mx-auto my-8 px-4 relative",children:(0,a.jsxs)("div",{className:"container mx-auto flex py-24 justify-between gap-10",children:[(0,a.jsx)("div",{className:"text-left basis-3/10",children:(0,a.jsxs)("div",{className:"max-w-[356px] flex flex-col gap-5",children:[(0,a.jsx)("span",{className:"font-roboto font-medium text-[48px] leading-[125%]",children:"Каталог лекторов"}),(0,a.jsx)("span",{className:"font-montserrat font-normal text-[20px] text-[#6B6B6B] leading-[136%]",children:"Выберите интересующего вас  эксперта."})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-10 basis-7/10 w-[100%]",children:[(0,a.jsx)(p.A,{searchValue:s,setSearchValue:l,onOpenThemesModal:w,isLectorsPage:!0}),(0,a.jsx)(f.A,{isOpen:i,onClose:k,selectedThemes:r,setSelectedThemes:n,onApplyFilters:C,onResetFilters:S}),(0,a.jsx)("div",{className:"min-h-[700px] flex justify-center items-center ",children:b?(0,a.jsx)("span",{className:"text-[48px] font-roboto uppercase font-bold",children:"Загрузка данных..."}):0===g.length?(0,a.jsx)("span",{className:"text-xl text-gray-500",children:o}):(0,a.jsx)(x,{lecturers:g,hasMore:v,loadMore:y,loading:b})})]})]})})}}}]);